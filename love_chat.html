<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ç†Šç†Šæ—¥å¸¸è®°å½•</title>
    <style>
        @font-face {
            font-family: 'KaiTi';
            src: url('STKAITI.TTF') format('truetype'),
                url('STXINWEI.TTF') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        /* å…¨å±€æ ·å¼ */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            background-color: #f9f9f9;
        }

        header {
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url(love_pic/g.jpg);
            text-align: center;
            padding: 15px 0;
            max-width: 100%;
            min-height:auto;
            gap: 20px;
        }

        #con {
            position: relative;
            max-width: 90%;
            margin: 10px auto;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 10px;
        }

        #con::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url(love_pic/g.jpg);
            background-size: 100%;
            opacity: 0.9;
            z-index: -1;
        }

        header {
            background-color: #f4f0ec;
            padding: 20px;
            text-align: center;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }
        #login {
          color: #444;
          font-weight: 600;
          text-decoration: none;
          cursor: pointer;
      }

      .dropdown {
          position: absolute;
          right: 20px;
          top: 20px;
      }

      .dropdown-content {
          display: none;
          position: absolute;
          right: 0;
          top: 100%; /* Ensure it drops below the login element */
          background-color: linear-gradient(45deg, #d5ecfb, #4fa9d9dd);
          min-width: 240px;
          box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
          z-index: 100;
          border-radius: 8px;
          overflow: hidden;
          padding: 10px 0; /* Added padding to handle hover area */
      }

      .dropdown:hover .dropdown-content,
      .dropdown-content:hover {
          display: block;
      }

      .dropdown-content p {
          padding: 12px 16px;
          color: #000000;
          text-shadow: 2px 2px rgb(255, 255, 255);
          font-weight: bold;
          text-align: center;
      }

      .dropdown-content a {
          color: rgb(76, 144, 212);
          padding: 12px 16px;
          text-decoration: none;
          display: block;
          
          transition: background-color 0.3s ease;
      }

      .dropdown-content a:hover {
          background-color: #4fb7e8a3;
      }


        h1 {
            margin: 0;
            color: #060606;
            font-size: 2.5rem;
            text-shadow: 2px 2px #fcfdfd;
        }

        h1:hover{
            transform: scale(1.02); 
            transition: transform 0.3s ease;
        }

        /* å›¾åº“æ ·å¼ */
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 40px;
        }

        .image-container {
            position: relative; /* ä¿®æ­£ä½ç½®é—®é¢˜ */
            flex-grow: 1;
            min-width: 200px;
            max-width: 300px;
            height: auto;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border-radius: 15px;
            transition: transform 0.2s ease, opacity 0.2s ease; /* æ›´æ”¹åŠ¨ç”»æŒç»­æ—¶é—´ */
        }


        .image-container:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px;
        }

        /* å›¾ç‰‡æ ·å¼ */
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
            opacity: 0.3; /* åˆå§‹é€æ˜åº¦ */
            transition: opacity 0.2s ease; /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
        }

        .image-container:hover img {
            opacity: 1; /* æ‚¬åœæ—¶å˜ä¸ºå®Œå…¨ä¸é€æ˜ */
        }

        /* æ–‡å­—æµ®å±‚ */
        .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(254, 253, 253, 0); /* è®¾ç½®ä¸ºä¸é€æ˜çš„é»‘è‰²èƒŒæ™¯ */
            color: rgba(255, 255, 255, 0); 
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0 0 15px 15px;
            opacity: 0; /* åˆå§‹çŠ¶æ€ä¸‹ä¸å¯è§ */
            transition: opacity 0.2s ease; /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
        }

        .image-container:hover .overlay {
            opacity: 1; /* æ‚¬åœæ—¶æ˜¾ç¤ºæµ®å±‚ */
        }


        .text {
            font-size: 1.5rem;
            text-align: center;
        }

        .bubble {
            position: absolute;
            width: 40px; /* è°ƒæ•´æ³¡æ³¡å¤§å° */
            height: 40px; /* è°ƒæ•´æ³¡æ³¡å¤§å° */
            background: linear-gradient(135deg, rgba(19, 150, 244, 0.7), rgba(255, 255, 255, 0.5)); /* æ¸å˜è‰² */
            border-radius: 50%; /* åœ†å½¢æ³¡æ³¡ */
            filter: blur(1px); /* æ¨¡ç³Šæ»¤é•œ */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); /* æŸ”å’Œçš„é˜´å½± */
            animation: float 1000s infinite ease-in-out; /* æ¼‚æµ®åŠ¨ç”»ï¼Œå¢åŠ æ—¶é—´ï¼ŒåŠ å…¥ç¼“å’Œæ•ˆæœ */
            will-change: transform, opacity; /* æ€§èƒ½ä¼˜åŒ– */
        }

        .bubble::before,
        .bubble::after {
            content: "";
            position: absolute;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.4); /* è°ƒæ•´é¢œè‰²å’Œé€æ˜åº¦ */
            border-radius: 50%;
            filter: blur(2px);
        }

        .bubble::before {
            top: -8px;
            left: -6px;
        }

        .bubble::after {
            left: 8px;
            top: 4px;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0);
                opacity: 0.8;
            }
            50% {
                transform: translate(-20px, -50%) rotate(10deg);
                opacity: 0.6;
            }
            100% {
                transform: translate(20px, -100%) rotate(-10deg);
                opacity: 0;
            }
        }

        .float {
            animation: float 10s linear infinite;
        }

        /* æ˜Ÿå…‰ç‚¹æ•ˆæœ */
        .star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(247, 209, 56, 0.7);
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

    </style>
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div id="con">
        <header>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <h1>ç†Šç†Šæ—¥å¸¸è®°å½•</h1>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <div class="dropdown">
                <a id="login" href="login.html" style="font-size: 20px;">Login</a>
                <div class="dropdown-content" id="vip-dropdown">
                    <p id="vip-message"></p>
                </div>
            </div>
        </header>

        <div class="gallery">
            <!-- Image 1 -->
            <div class="image-container">
                <img src="love_pic/260.jpg" alt="èŠå¤©è®°å½•1">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <!-- Image 2 -->
            <div class="image-container">
                <img src="love_pic/261.jpg" alt="èŠå¤©è®°å½•2">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <!-- Image 3 -->
            <div class="image-container">
                <img src="love_pic/262.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/263.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/264.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/265.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/266.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/267.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/268.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/270.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/272.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/273.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/276.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>

            <div class="image-container">
                <img src="love_pic/277.jpg" alt="èŠå¤©è®°å½•3">
                <div class="overlay">
                    <div class="text">ğŸ»â™¥ğŸ»</div>
                </div>
            </div>
        </div>

        <footer>
            <div id="footer-container" style="text-align: center; padding: 20px; background-color: rgba(240, 244, 248, 0.6); border-top: 1px solid #ddd; margin-top: 40px;">
                <p style="font-size: 19px; color: #555; margin: 0; font-family: 'KaiTi', 'Poppins', sans-serif; font-weight: 600;">
                    ç½‘é¡µè®¾è®¡: å°å› &nbsp; | &nbsp; ç½‘é¡µç¼–ç¨‹: å°å› &nbsp; | &nbsp; æ‹æ‘„: å°å…‰, å°å› &nbsp; | &nbsp; å‹æƒ…å‚ä¸: å°å°ç†Š
                </p>
                <p style="font-size: 14px; color: #999; margin-top: 10px; font-family: 'KaiTi', 'Poppins', sans-serif;">
                    Â© 2024 ç†Šå®¶ All Rights Reserved.
                </p>
            </div>
        </footer>        

            <!-- æ»šåŠ¨æ¡è¿›åº¦æ¡ -->
        <div id="scrollProgress">
            <div id="scrollProgressBar"></div>
        </div>
    </div>

    <script>
        // // å›¾ç‰‡ç‚¹å‡»äº‹ä»¶çš„JavaScriptä»£ç 
        // document.querySelectorAll('.image-container').forEach((container) => {
        //     container.addEventListener('click', () => {
        //         alert('ä½ ç‚¹å‡»äº†æƒ…ä¾£èŠå¤©è®°å½•å›¾ç‰‡ï¼');
        //     });
        // });

        function createBubble() {
            const bubble = document.createElement('div');
            bubble.classList.add('bubble');
            bubble.style.left = Math.random() * 100 + 'vw';
            bubble.style.animationDuration = (Math.random() * 20 + 5) + 's'; /* éšæœºçš„åŠ¨ç”»æ—¶é—´ */
            document.body.appendChild(bubble);

            // åˆ›å»ºæ˜Ÿå…‰æ•ˆæœ
            const starCount = Math.floor(Math.random() * 3) + 1; /* éšæœºæ•°é‡æ˜Ÿå…‰ */
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                star.style.left = (Math.random() * 10 - 5) + 'px'; /* éšæœºæ˜Ÿå…‰ä½ç½® */
                star.style.top = (Math.random() * 10 - 5) + 'px';
                bubble.appendChild(star);
            }

            setTimeout(() => {
                bubble.remove();
            }, 8000); /* æ³¡æ³¡å­˜åœ¨æ—¶é—´ï¼Œä¸åŠ¨ç”»ä¸€è‡´ */
        }

        setInterval(createBubble, 600); /* æ§åˆ¶æ³¡æ³¡ç”Ÿæˆé¢‘ç‡ */

        window.onload = function() {
            const floatingElement = document.querySelector('.float');
            const pageHeight = document.body.scrollHeight; // è·å–é¡µé¢çš„æ€»é«˜åº¦

            // åŠ¨æ€æ’å…¥CSSè§„åˆ™
            const styleSheet = document.styleSheets[0];
            styleSheet.insertRule(`
                @keyframes float {
                    0% {
                        transform: translate(0, 0);
                        opacity: 0.8;
                    }
                    50% {
                        transform: translate(-20px, -${pageHeight * 0.5}px) rotate(10deg); /* 50% é¡µé¢é«˜åº¦ */
                        opacity: 0.6;
                    }
                    100% {
                        transform: translate(20px, -${pageHeight}px) rotate(-10deg); /* 100% é¡µé¢é«˜åº¦ */
                        opacity: 0;
                    }
                }
            `, styleSheet.cssRules.length);

            // å°†åŠ¨ç”»åº”ç”¨åˆ°æµ®åŠ¨å…ƒç´ 
            floatingElement.style.animation = "float 10s linear infinite";
        };


        // æ›´æ–°æ»šåŠ¨è¿›åº¦æ¡çš„ JavaScript
        window.onscroll = function() {
            const scrollProgressBar = document.getElementById('scrollProgressBar');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            scrollProgressBar.style.height = scrollPercentage + "%";
        };




        //login

        document.addEventListener('DOMContentLoaded', function () {
          const username = localStorage.getItem('username');
          const loginElement = document.getElementById('login');
          const vipDropdown = document.getElementById('vip-dropdown');
          const vipMessage = document.getElementById('vip-message');

          if (username) {
              loginElement.textContent = username;
              loginElement.href = '#';
              vipMessage.innerHTML = `è¶…å‰å®³çš„ç†Šç†ŠVIP ${username}, æ‚¨å¥½! <a href="login_info.html">æŸ¥çœ‹æˆ‘çš„ç†Šç†Švipè¯¦æƒ…</a>`;

              // Show dropdown on hover
              loginElement.addEventListener('mouseover', function () {
                  vipDropdown.style.display = 'block';
              });

              loginElement.addEventListener('mouseleave', function () {
                  setTimeout(function () {
                      if (!vipDropdown.matches(':hover')) {
                          vipDropdown.style.display = 'none';
                      }
                  }, 300);
              });

              vipDropdown.addEventListener('mouseover', function () {
                  vipDropdown.style.display = 'block';
              });

              vipDropdown.addEventListener('mouseleave', function () {
                  vipDropdown.style.display = 'none';
              });
          } else {
              vipMessage.innerHTML = `( ï¼¾âˆ€ï¼¾ï¼‰ï¼æ¬¢è¿ï¼¼( ï¼¾âˆ€ï¼¾ï¼‰`;
          }
      });







            //supabase
            document.addEventListener('DOMContentLoaded', async () => {
            const pageUrl = window.location.href;
            const username = localStorage.getItem('username') || null;

            try {
                // è·å–ç”¨æˆ·IPå’Œåœ°ç†ä½ç½®
                const ipResponse = await fetch('https://ipapi.co/json/');
                if (!ipResponse.ok) throw new Error('è·å–IPåœ°å€å’Œä½ç½®å¤±è´¥');
                const locationData = await ipResponse.json();
                console.log('locationData:', locationData); // è°ƒè¯•ä¿¡æ¯

                const city = locationData.city || 'æœªçŸ¥åŸå¸‚';
                const country = locationData.country_name || 'æœªçŸ¥å›½å®¶';
                const region = locationData.region || 'æœªçŸ¥åœ°åŒº';

                // ä½¿ç”¨æœåŠ¡å™¨æ—¶é—´å¹¶è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´
                const getServerTime = async () => {
                const res = await fetch('https://worldtimeapi.org/api/timezone/Asia/Shanghai');
                if (!res.ok) throw new Error('è·å–æœåŠ¡å™¨æ—¶é—´å¤±è´¥');
                const timeData = await res.json();
                return timeData.datetime;
                };

                const beijingTime = await getServerTime();

                // è®°å½•è®¿é—®è¯¦æƒ…
                const supabaseUrl = 'https://uppjbtoicickglnjorjn.supabase.co';
                const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwcGpidG9pY2lja2dsbmpvcmpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg2MzE4MDUsImV4cCI6MjA0NDIwNzgwNX0.TnPWSguzaNfyoR4lYNngiiCAOThjfhf19iOJsW2o__M';
                const { createClient } = window.supabase;
                const supabase = createClient(supabaseUrl, supabaseKey);

                const { data, error } = await supabase
                .from('visits')
                .insert([{ username, page_url: pageUrl, timestamp: beijingTime, city, country, region }]);

                if (error) {
                console.error('è®°å½•è®¿é—®è¯¦æƒ…æ—¶å‡ºé”™:', error);
                } else {
                console.log('è®¿é—®è®°å½•æˆåŠŸ:', data);
                }
            } catch (error) {
                console.error('è·å–ç”¨æˆ·ä½ç½®æ—¶å‡ºé”™:', error.message);
            }
            });



    </script>
</body>
</html>
